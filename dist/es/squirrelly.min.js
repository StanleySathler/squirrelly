var n={},e={},r=/{{ *?(?:(?:([\w$]+) *?\((.*?)\) *?([\w$]*))|(?:([\w$]+) *?\((.*?)\) *?\/)|(?:([\w$@].*?) *?((?:\| *?[\w$]+ *)*))|(?:\/ *?([\w$]+))|(?:# *?([\w$]+))|(?:!\-\-[^]+?\-\-)) *?}}\n?/g,t={s:"{{",e:"}}"},a=/@(?:((?:\.\.\/)+)|([\w$]+):)?/g,i=r,l=t;function s(n){o(n[0],n[1]),r=i,t=l}function o(n,e){var r=n+i.source.slice(l.s.length,0-(l.e.length+3))+e+"\\n?",t=i.lastIndex;l={s:n,e:e},(i=RegExp(r,"g")).lastIndex=t}function u(n,e,r){return n.replace(a,(function(n,t,a){return"hvals"+(t&&t.length?e[r-t.length/3-1].id:a||"")+"."}))}var f={if:{helperStart:function(n){return"if("+n+"){"},helperEnd:function(){return"}"},blocks:{else:function(){return"}else{"}}},each:{helperStart:function(n,e){return"for(var i=0;i<"+n+".length; i++){tR+=(function(hvals){var tR='';var hvals"+e+"=hvals;"},helperEnd:function(n){return"return tR})({this:"+n+"[i],index:i})};"}},foreach:{helperStart:function(n,e){return"for(var key in "+n+"){if(!"+n+".hasOwnProperty(key)) continue;tR+=(function(hvals){var tR='';var hvals"+e+"=hvals;"},helperEnd:function(n){return"return tR})({this:"+n+"[key], key: key})};"}},log:{selfClosing:function(n){return"console.log("+n+");"}},tags:{selfClosing:function(n){return o(n.slice(0,n.indexOf(",")).trim(),n.slice(n.indexOf(",")+1).trim()),""}},js:{selfClosing:function(n){return n+";"}}},c={e:function(n){return n}},v={},h={start:"",end:""};function d(n){if("clear"===n)v={};else for(var e in n)n.hasOwnProperty(e)&&(v[e]=n[e]);!function(){for(var n in h={start:"",end:""},v)v.hasOwnProperty(n)&&v[n]&&(h.start+="Sqrl.F."+n+"(",h.end+=")")}()}var p=!0;function g(n){return p=n}function w(n,e){var r,t=!1,a="",i="";if(e&&""!==e){r=e.split("|");for(var l=0;l<r.length;l++)r[l]=r[l].trim(),""!==r[l]&&("safe"!==r[l]?(a="Sqrl.F."+r[l]+"("+a,i+=")"):t=!0)}return a+=h.start,i+=h.end,!t&&p&&(a+="Sqrl.F.e(",i+=")"),a+n+i}function y(n){var a,s=0,o="var tR='';",c=[],v=-1,h=0,d={};function p(e){s!==e&&(o+="tR+='"+n.slice(s,e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"';")}function g(n,e){var r=u(n,c,v);return"@"===n[0]?w(r,e):w("options."+r,e)}for(l=t,(i=r).lastIndex=0;null!==(a=i.exec(n));)if(p(a.index),s=a[0].length+a.index,a[1]){var y=a[3];""!==y&&null!==y||(y=h,h++);var R=f.hasOwnProperty(a[1]);v+=1;var x=a[2]||"";x=u(x,c,v),R||(x="["+x+"]");var P={name:a[1],id:y,params:x,native:R};c[v]=P,R?(o+=f[a[1]].helperStart(x,y),s=i.lastIndex):o+="tR+=Sqrl.H."+a[1]+"("+x+",function(hvals){var hvals"+y+"=hvals;var tR='';"}else if(a[4]){var m=a[5]||"";if(m=u(m,c,v),"include"===a[4]){var O=n.slice(0,a.index),S=n.slice(a.index+a[0].length),$=m.replace(/'|"/g,""),k=e[$];n=O+k+S,s=i.lastIndex=a.index}else f.hasOwnProperty(a[4])&&f[a[4]].hasOwnProperty("selfClosing")?(o+=f[a[4]].selfClosing(m),s=i.lastIndex):o+="tR+=Sqrl.H."+a[4]+"("+m+");"}else if(a[6])o+="tR+="+g(a[6],a[7])+";";else if(a[8]){var F=c[v];F&&F.name===a[8]?(v-=1,!0===F.native?o+=f[F.name].helperEnd(F.params,F.id):d[F.id]?o+="return tR}});":o+="return tR});"):console.error("Helper beginning & end don't match.")}else if(a[9]){var q=c[v];if(q.native){var H=f[q.name];H.blocks&&H.blocks[a[9]]?(o+=H.blocks[a[9]](q.id),s=i.lastIndex):console.warn("Native helper '%s' doesn't accept that block.",q.name)}else d[q.id]?o+="return tR},"+a[9]+":function(hvals){var hvals"+q.id+"=hvals;var tR='';":(o+="return tR},{"+a[9]+":function(hvals){var hvals"+q.id+"=hvals;var tR='';",d[q.id]=!0)}return p(n.length),o+="return tR",new Function("options","Sqrl",o.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))}function R(n,e){c[n]=e}function x(e,r){n[e]=r}function P(n,e){f[n]=e}function m(r,t){return"function"==typeof r?r(t,{H:n,F:c,P:e}):"string"==typeof r?$(t,r)(t,{H:n,F:c,P:e}):void 0}function O(n,r){e[n]=r}var S={};function $(n,e){var r=n.$file,t=n.$name,a=n.$cache;if(r){var i=require("fs");return!1!==a?(S.hasOwnProperty(r)||(S[r]=y(i.readFileSync(r,"utf8"))),S[r]):y(i.readFileSync(r,"utf8"))}return"string"==typeof e?t&&!1!==a?(S.hasOwnProperty(t)||(S[t]=y(e)),S[t]):!0===a?(S.hasOwnProperty(e)||(S[e]=y(e)),S[e]):y(e):t&&!1!==a&&S.hasOwnProperty(t)?S[t]:"No template"}function k(r,t){return t.$file=r,$(t)(t,{H:n,F:c,P:e})}function F(n,e,r){return r(null,k(n,e))}export{y as Compile,c as F,n as H,e as P,m as Render,F as __express,g as autoEscaping,s as defaultTags,R as defineFilter,x as defineHelper,P as defineNativeHelper,O as definePartial,$ as load,k as renderFile,d as setDefaultFilters};
//# sourceMappingURL=squirrelly.min.js.map
